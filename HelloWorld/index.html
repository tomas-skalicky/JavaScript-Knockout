<!DOCTYPE html>
<html>
<head>
<title>Knockout: Hello World</title>

<script type='text/javascript' src='js/lib/knockout-2.2.0.js'></script>
<script type='text/javascript' src='js/lib/jquery-1.8.2.js'></script>
<script type='text/javascript' src='js/lib/jquery.tmpl.js'></script>
</head>

<body>
	<section>
		<p>First name: <input data-bind='value: firstName' /></p>
		<p>Last name: <input data-bind='value: lastName' /></p>
        <p>Full name: <span data-bind='text: fullName'></span></p>

		<h2>Friends</h2>
        <ul data-bind="foreach: friends">
            <li>
                <input data-bind="value: name" />
                <button data-bind="click: remove">Remove</button>
            </li>
        </ul>
        <button data-bind="click: addFriend">Add friend</button>
    </section>


<script type='text/javascript'>
function Friend(name) {
    return {
        name: ko.observable(name),
        remove: function() {
            viewModelInstance.friends.remove(this);
        }
    };
}

// Here's my data model
var ViewModel = function (first, last) {
    this.firstName = ko.observable(first);
    this.lastName = ko.observable(last);

    this.fullName = ko.dependentObservable(function () {
        return this.firstName() + " " + this.lastName();
    }, this);


    this.friends = ko.observableArray();

    // Methods of the ViewModel "class".
    this.addFriend = function (friendName) {
        this.friends.push(new Friend(friendName));
    };
};


var viewModelInstance = new ViewModel("Planet", "Earth");
viewModelInstance.addFriend("Alex");
viewModelInstance.addFriend("Tomas");
viewModelInstance.addFriend("Gerhard");


// This makes Knockout get to work
ko.applyBindings(viewModelInstance);
</script>

    <!--<script type='text/javascript' src='js/viewModel.js'></script>-->
</body>
</html>
